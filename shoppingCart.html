<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/shoppingCart.css">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	</head>
	<body>
<!-- header -->
		<div class="header">
			<div class="header_wz">
				<p class="header_p">全场满100元包邮,
				还差<span class="bao">100.00</span>元包邮</p>
				<p class="header_p1">全场满100元包邮,
				已包邮</p>
			</div>
		</div>
<!-- content -->	
		<div class="content">
			<div class="content_1">
				<div class="content_1_top">
					<div class="content_1_top_left">
						<img class="button_img_one" src="img/31.png" alt="">
						<img class="button_img_tow" src="img/32.png" alt="">
					</div>
					<div class="content_1_top_right">
						<div class="content_1_top_right_left">
							<img src="img/3.jpg">
						</div>
						<div class="content_1_top_right_right">
							<div class="content_1_top_right_right_top">
								<p>江西赣南脐橙20个160g以上/个</p>
								<img class="trash" src="img/33.png">
							</div>
							<div class="content_1_depreciate">
								<p>直降</p>
							</div>
							<div class="content_1_cost">
								<div class="content_1_cost_left">
									<p>￥<span class="content_1_cost_p1_span">59</span></p>
									<p>￥<span class="content_1_cost_p2_span">75.9</span></p>
								</div>
								<div class="content_1_cost_right">
									<input type="button" value="-" id="minus" class="minus_left">
									<span class="content_span">1</span>
									<input type="button" value="+" id="add" class="add_right">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="content_1_bottom">
					<p class="content_1_bottom_wz">满减<span class="content_1_bottom_span">满1件，即享<b>16.9</b>元优惠</span>
						<span class="content_1_bottom_span_2">已满足【满一件,已节省:<h>12.9</h>】</span>
					</p>
				</div>
			</div>

		<div class="content_1">
			<div class="content_1_top">
				<div class="content_1_top_left">
					<img class="button_img_one" src="img/31.png" alt="">
					<img class="button_img_tow" src="img/32.png" alt="">
				</div>
				<div class="content_1_top_right">
					<div class="content_1_top_right_left">
						<img src="img/26.jpg">
					</div>
					<div class="content_1_top_right_right">
						<div class="content_1_top_right_right_top">
							<p>新疆阿克苏冰糖心苹果4.5kg原箱果径80mm以上</p>
							<img class="trash" src="img/33.png">
						</div>
						<div class="content_1_depreciate">
							<p>直降</p>
						</div>
						<div class="content_1_cost">
							<div class="content_1_cost_left">
								<p>￥<span class="content_1_cost_p1_span">59</span></p>
								<p>￥<span class="content_1_cost_p2_span">78</span></p>
							</div>
							<div class="content_1_cost_right">
								<input type="button" value="-" id="minus" class="minus_left">
								<span class="content_span">1</span>
								<input type="button" value="+" id="add" class="add_right">
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="content_1_bottom">
				<p class="content_1_bottom_wz">满减<span class="content_1_bottom_span">满1件，即享<b>19</b>元优惠</span>
					<span class="content_1_bottom_span_2">已满足【满一件,已节省:<h>19</h>】</span>
				</p>
			</div>
		</div>
		
		<div class="content_1">
			<div class="content_1_top">
				<div class="content_1_top_left">
					<img class="button_img_one" src="img/31.png" alt="">
					<img class="button_img_tow" src="img/32.png" alt="">
				</div>
				<div class="content_1_top_right">
					<div class="content_1_top_right_left">
						<img src="img/7.jpg">
					</div>
					<div class="content_1_top_right_right">
						<div class="content_1_top_right_right_top">
							<p>新疆库尔勒精选香梨3kg120g以上/个</p>
							<img class="trash" src="img/33.png">
						</div>
						<div class="content_1_depreciate">
							<p>直降</p>
						</div>
						<div class="content_1_cost">
							<div class="content_1_cost_left">
								<p>￥<span class="content_1_cost_p1_span">39.9</span></p>
								<p>￥<span class="content_1_cost_p2_span">52.8</span></p>
							</div>
							<div class="content_1_cost_right">
								<input type="button" value="-" id="minus" class="minus_left">
								<span class="content_span">1</span>
								<input type="button" value="+" id="add" class="add_right">
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="content_1_bottom">
				<p class="content_1_bottom_wz">满减<span class="content_1_bottom_span">满1件，即享<b>12.9</b>元优惠</span>
					<span class="content_1_bottom_span_2">已满足【满一件,已节省:<h>12.9</h>】</span>
				</p>
			</div>
		</div>
		
		<div class="content_1">
			<div class="content_1_top">
				<div class="content_1_top_left">
					<img class="button_img_one" src="img/31.png" alt="">
					<img class="button_img_tow" src="img/32.png" alt="">
				</div>
				<div class="content_1_top_right">
					<div class="content_1_top_right_left">
						<img src="img/29.jpg">
					</div>
					<div class="content_1_top_right_right">
						<div class="content_1_top_right_right_top">
							<a href=""><p>懒懒泰国青2个700g/个</p></a>
							<img class="trash" src="img/33.png">
						</div>
						<div class="content_1_cost content_2_cost">
							<div class="content_1_cost_left">
								<p>￥<span class="content_1_cost_p1_span">29.9</span></p>
							</div>
							<div class="content_1_cost_right">
								<input type="button" value="-" id="minus" class="minus_left">
								<span class="content_span">1</span>
								<input type="button" value="+" id="add" class="add_right">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
<!-- count 计算价位 -->
		<div class="count">
			<div class="count_left">
				<img class="count_img1" src="img/31.png" alt="">
				<img class="count_img2" src="img/32.png" alt="">
				<p>全选</p>
			</div>
			<div class="count_center">
				<p>合计(不含运费):￥<span class="count_center_num">0.00</span></p>
				<p>已优惠：<span>￥0.00</span></p>
			</div>
			<div class="count_right">
				<a href=""><p>去结算(<span class="count_right_num">0</span>)</p></a>
			</div>
		</div>

<!-- bottom 底部 -->

		<div class="bottom">
			<a href="#"><img src="img/24.png"><span>首页</span></a>
			<a href="class.html"><img src="img/29.png"><span>分类</span></a>
			<a href="#"><img src="img/22.png"><span>吃饭吧</span></a>
			<a href="#"><img src="img/27.png"><span>购物车</span><p class="shoppingSpan">4</p></a>
			<a href="#"><img src="img/28.png"><span>我的易果</span></a>
			
		</div>

	</body>
</html>	
	<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
	<script type="text/javascript">
		$(function(){
			$(".content_1_top_left .button_img_one").click(function(){


				//input后的span
				var num1=parseInt($(this).parent().next().children(".content_1_top_right_right").children(".content_1_cost").children(".content_1_cost_right").children(".content_span").html());
				//满减后的span
				var num2=parseFloat($(this).parent().parent().next().children(".content_1_bottom_wz").children(".content_1_bottom_span").children().html());
				var num3=parseFloat((num1*num2)*100)/100;
				$(this).parent().parent().next(".content_1_bottom").children().children(".content_1_bottom_span_2").children("h").html(num3);
			});
			
		});

			

				$(".content_1_top_left").click(function(){
					if($(this).children(".button_img_one").css("display")=="none"){
						isnone($(this));
						totalmoney();

					}else if($(this).children(".button_img_one").css("display")=="block"){
						isblock($(this));
						totalmoney();
						
					}
				});
				

				$(".count_left").click(function(){
					if($(".count_img1").css("display")=="block"){
						$(".count_img1").css({"display":"none"});
						$(".count_img2").css({"display":"inline-block"});
						isblock($(".content_1_top_left"));


					}else{
						var count=0;
						for(var i=0;i<$(".button_img_one").length;i++){
							if($($(".button_img_one")[i]).css("display")=="block"){
								count++;
								break;
							}
						}
						if(count==0){
							$(".count_img2").css({"display":"none"});
							$(".count_img1").css({"display":"inline-block"});
							isnone($(".content_1_top_left"));
						}else{
							$(".count_img1").css({"display":"none"});
							$(".count_img2").css({"display":"inline-block"});
							isblock($(".content_1_top_left"));
						}
					}
					totalmoney();
					
				});

				function isnone(isnoneDom){

					isnoneDom.children(".button_img_tow").css("display","none");
						isnoneDom.children(".button_img_one").css("display","block");
						isnoneDom.children(".button_img_tow").parent().parent().next(".content_1_bottom").children(".content_1_bottom_wz").css({"color":"#333333"});
						isnoneDom.children(".button_img_tow").parent().parent().next(".content_1_bottom").children().children(".content_1_bottom_span_2").css({"display":"none"});
						isnoneDom.children(".button_img_tow").parent().parent().next(".content_1_bottom").children().children(".content_1_bottom_span").css({"display":"inline-block"});
				}
				function isblock(isblockDom){
					isblockDom.children(".button_img_one").css("display","none");
						isblockDom.children(".button_img_tow").css("display","block");
						isblockDom.children(".button_img_one").parent().parent().next(".content_1_bottom").children(".content_1_bottom_wz").css({"color":"#20c57f"});
						isblockDom.children(".button_img_one").parent().parent().next(".content_1_bottom").children().children(".content_1_bottom_span_2").css({"display":"inline-block",color:"#333333"});
						isblockDom.children(".button_img_one").parent().parent().next(".content_1_bottom").children().children(".content_1_bottom_span").css({"display":"none"});
				}

					
				


			

			
				//点减号
				$(".minus_left").click(function(){
					var spanDom=$(this).next("span");
					jiajian(spanDom,-1);

				});
				//点加号
				$(".add_right").click(function(){
					var spanDom=$(this).prev("span");
					jiajian(spanDom,1);
				});
				function jiajian(spanDom,n){
					var count=parseInt(spanDom.html());
					count=count+n;
					if(count<1){
						count=1;
					}
					spanDom.html(count);
					totalmoney();
					number();

						//input后的span
					var num1=parseInt(spanDom.html());
					//满减后的span
					console.log(num1);
					var num2=parseFloat(spanDom.parents(".content_1").children(".content_1_bottom").children(".content_1_bottom_wz").children(".content_1_bottom_span").children("b").html());
					console.log(num2);
					var num3=parseFloat((num1*num2)*100)/100;
					console.log(num3);
					/*spanDom.parent(".content_1_cost_right").parent(".content_1_cost").parent(".content_1_top_right_right").parent(".content_1_top_right").parent(".content_1_top").next(".content_1_bottom").children(".content_1_bottom_wz").children(".content_1_bottom_span_2").children("h").html(num3);*/
					spanDom.parents(".content_1_top").next(".content_1_bottom").children(".content_1_bottom_wz").children(".content_1_bottom_span_2").children("h").html(num3);
				}


				function number(){
					var rows=$(".content").children();
					var lmoney=0;
					for(var i=0;i<rows.length;i++){
						lmoney+=parseFloat($(rows[i]).children(".content_1_top").children(".content_1_top_right").children(".content_1_top_right_right").children(".content_1_cost").children(".content_1_cost_right").children(".content_span").html());
					}
					$(".shoppingSpan").html(lmoney);
				}

				//计算总价
				function totalmoney(){
					var totalmoney = 0;
					var number=0;
					$(".content_1").each(function(i,item){
						if($(".button_img_tow",item).css("display")=="block"){
							totalmoney+=parseInt(($(".content_1_cost_p1_span",item).text()*$(".content_span",item).text())*100)/100;
							number+=parseInt($(".content_span",item).text());
						}

					});
					$(".count_center_num").html(totalmoney);
					$(".count_right_num").html(number);
					isbao(totalmoney);
				}

				function isbao(totalmoney){

					if(totalmoney>=100){
						$(".header_p").css({"display":"none"});
						$(".header_p1").css({"display":"block"});

					}else{
						$(".header_p1").css({"display":"none"});
						$(".header_p").css({"display":"block"});
						var difnum=100-totalmoney;
						$(".bao").html(difnum);
					}
				}
				$(".trash").click(function(){
					if(window.confirm("亲,确定要删除吗?")){
						$(this).parents(".content_1").remove();
					}
					totalmoney();
					number();
				});		
				
				
			

	</script>